{% extends "base.html" %}

{% block content %}
    <style>
    .risk-gradient{
      display: inline-block;
      vertical-align: middle;
      height : 16px;
      width: 200px;
      margin-left: 20px;

      /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#10ff00+0,57ff28+0,fbff30+50,ff0000+100 */
      background: #10ff00; /* Old browsers */
      background: -moz-linear-gradient(left,  #10ff00 0%, #57ff28 0%, #fbff30 50%, #ff0000 100%); /* FF3.6-15 */
      background: -webkit-linear-gradient(left,  #10ff00 0%,#57ff28 0%,#fbff30 50%,#ff0000 100%); /* Chrome10-25,Safari5.1-6 */
      background: linear-gradient(to right,  #10ff00 0%,#57ff28 0%,#fbff30 50%,#ff0000 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#10ff00', endColorstr='#ff0000',GradientType=1 ); /* IE6-9 */

    }

    .cursor{
      position: relative;
      width: 0;
      height: 0;
      left: -5px;
      top: 0px;
      border-style: solid;
      border-width: 0 5px 16px 5px;
      border-color: transparent transparent #252525 transparent;
    }
    </style>
    <p>
    <h1>AXA - Audit des Risques Habitations</h1>
    <p>
    <div class="card">
        <div class="card-block">
            <form action="/audit/" method="GET">
              <div class="form-group">
                <label for="AddressInput">Adresse</label>
                <input type="text" class="form-control" id="AddressInput" name="address" placeholder="Adresse">
              </div>
              <div class="form-group">
                <label for="ZipInput">Code Postal</label>
                <input type="text" class="form-control" id="ZipInput" name="zip" placeholder="Code Postal">
              </div>
              <div class="form-group">
                <label for="CityInput">Ville</label>
                <input type="text" class="form-control" id="CityInput" name= "city" placeholder="Ville">
              </div>
              <button type="submit" class="btn btn-primary">OK</button>
            </form>
        </div>
    </div>
    <p>
    <h2>Resultats</h2>
    <hr>
    <h3>Adresse</h3>
    <p>
    {% for s in text %}
    {{s.title}}<br>
    {% endfor %}
    <p>
    <h3>Risques</h3>
    <p>
    <div class="row">
      <div class="col-sm-6">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th>Garantie</th>
              <th class="text-center">Evaluation du risque</th>
            </tr>
          </thead>
          <tbody>
          {% for risk in risks %}
            <tr>
            <td>{{ risk.label }}</td>
            <td class="text-center"><div class="risk-gradient"><div class="cursor" style="left: {{risk.cursor}}px;"></div></div></td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
      <div class="col-sm-6">
        <div id="mapid" style="height: 100%;"></div>
      </div>
    </div>
    <p>
    <p>
    <p>

    <script>
    var mymap = L.map('mapid').setView([{{lat}}, {{lon}}], 17);

 /*   L.tileLayer('http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
  maxZoom: 20,
  attribution: 'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
}).addTo(mymap);*/

    var OpenStreetMap_Mapnik = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(mymap);

    var marker = L.marker([{{lat}}, {{lon}}]).addTo(mymap);
    </script>
{% endblock content %}
